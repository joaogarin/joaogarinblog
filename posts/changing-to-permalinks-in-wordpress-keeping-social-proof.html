<!doctype html>
<html lang="en">


<head>
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>joaogarin | Changing to permalinks in wordpress keeping social proof</title>
  <meta name="description" content="One of the things to worry when chaning URL's in any website is keeping social proof in past shared links.">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="Changing to permalinks in wordpress keeping social proof">
  <meta property="og:type" content="website">
  <meta property="og:url" content="/posts/changing-to-permalinks-in-wordpress-keeping-social-proof">
  <meta property="og:description" content="One of the things to worry when chaning URL's in any website is keeping social proof in past shared links.">
  <meta property="og:site_name" content="joaogarin">
  <meta property="og:image" content="/posts/social-media-mess.jpg">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:url" content="/posts/changing-to-permalinks-in-wordpress-keeping-social-proof">
  <meta name="twitter:title" content="Changing to permalinks in wordpress keeping social proof">
  <meta name="twitter:description" content="One of the things to worry when chaning URL's in any website is keeping social proof in past shared links.">
  <meta name="twitter:image" content="/posts/social-media-mess.jpg">

  <link href="/feed.xml" type="application/rss+xml" rel="alternate" title="joaogarin Last 10 blog posts" />

  

  
    <link rel="icon" type="image/x-icon" href="/assets/favicon-light-a98c41efc5ed9fcc06ac664c9e2f7a9b3c3b2e0a52357d221fe382f6f4abc8fc.ico">
    <link rel="apple-touch-icon" href="/assets/apple-touch-icon-light-87d1f2a3a19b1500e5c1626a0492025ca5f7f97d24540dc5900288e92112925a.png">
    <link rel="stylesheet" type="text/css" href="/assets/light-bb1553a18d0f1ccfe1aabc010584c49b4277a88503216b78906ba719e30019c1.css">
  
</head>

<body>
  <main>
    <div class="grid grid-centered">
      <div class="grid-cell">
        <nav class="header-nav scrollappear">
  <a href="/" class="header-logo" title="joaogarin">joaogarin</a>
  <ul class="header-links">
    
      <li>
        <a href="/about" title="About me">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-about">
  <use href="/assets/about-ecf154b571ab8034ae00aeed91a3b7ad68db80b46d958753ad6216c919486e88.svg#icon-about" xlink:href="/assets/about-ecf154b571ab8034ae00aeed91a3b7ad68db80b46d958753ad6216c919486e88.svg#icon-about"></use>
</svg>

        </a>
      </li>
    
    
      <li>
        <a href="https://twitter.com/joaogarin" rel="noreferrer noopener" target="_blank" title="Twitter">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-twitter">
  <use href="/assets/twitter-8842c33965263ad1b03a978406826677a668f94125d5837e70ab83f24b3213a7.svg#icon-twitter" xlink:href="/assets/twitter-8842c33965263ad1b03a978406826677a668f94125d5837e70ab83f24b3213a7.svg#icon-twitter"></use>
</svg>

        </a>
      </li>
    
    
      <li>
        <a href="https://www.facebook.com/joao.garin" rel="noreferrer noopener" target="_blank" title="Facebook">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-facebook">
  <use href="/assets/facebook-72c99b26d37bee65607720abb23d26b44ef30cca1187f98b0d9305be1230b1bf.svg#icon-facebook" xlink:href="/assets/facebook-72c99b26d37bee65607720abb23d26b44ef30cca1187f98b0d9305be1230b1bf.svg#icon-facebook"></use>
</svg>

        </a>
      </li>
    
    
    
      <li>
        <a href="https://github.com/joaogarin" rel="noreferrer noopener" target="_blank" title="GitHub">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-github">
  <use href="/assets/github-094f81040819f34343ee6ffff0980f17e2807b08b595eaaf66ae3554934fd78d.svg#icon-github" xlink:href="/assets/github-094f81040819f34343ee6ffff0980f17e2807b08b595eaaf66ae3554934fd78d.svg#icon-github"></use>
</svg>

        </a>
      </li>
    
    
    
    
    
    
    
      <li>
        <a href="https://www.linkedin.com/in/joao-garin-9b118525" rel="noreferrer noopener" target="_blank" title="LinkedIn">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-linkedin">
  <use href="/assets/linkedin-cdc5c107044324a3dfbea2e9ead15873f8dee304c37d73a046988956b706256e.svg#icon-linkedin" xlink:href="/assets/linkedin-cdc5c107044324a3dfbea2e9ead15873f8dee304c37d73a046988956b706256e.svg#icon-linkedin"></use>
</svg>

        </a>
      </li>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
      <li>
        <a href="/feed.xml" rel="noreferrer noopener" target="_blank" title="RSS">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-rss">
  <use href="/assets/rss-541ec5cea9cefd10d2fcfec01888f3f231a8829940249835fa7b7b3a12ae0d0d.svg#icon-rss" xlink:href="/assets/rss-541ec5cea9cefd10d2fcfec01888f3f231a8829940249835fa7b7b3a12ae0d0d.svg#icon-rss"></use>
</svg>

        </a>
      </li>
    
  </ul>
</nav>

        <article class="article scrollappear">
          <header class="article-header">
            <h1>Changing to permalinks in wordpress keeping social proof</h1>
            <p>One of the things to worry when chaning URL's in any website is keeping social proof in past shared links.</p>
            <div class="article-list-footer">
              <span class="article-list-date">
                August 12, 2013
              </span>
              <span class="article-list-divider">-</span>
              <span class="article-list-minutes">
                
                
                  2 minute read
                
              </span>
              <span class="article-list-divider">-</span>
              <div class="article-list-tags">
                
                  <a href="/tag/web">web</a>
                
              </div>
            </div>
          </header>

          <div class="article-content">
            <p><a href="/assets/posts/social-media-mess-fa189f96af501a59bde2c47619908a97667bb57310a9e886916a353f44ccff80.jpg" data-rjs="/assets/posts/social-media-mess-fa189f96af501a59bde2c47619908a97667bb57310a9e886916a353f44ccff80.jpg" class="fluidbox-trigger">
  <img src="/assets/posts/social-media-mess-fa189f96af501a59bde2c47619908a97667bb57310a9e886916a353f44ccff80.jpg" alt="WP social links" />
</a></p>

<p>One of the things to worry when chaning URL’s in any website is keeping social proof in past shared links, keeping sure that these are still valid and still counted when users visit a page.</p>

<p>Plugins like digg digg, or sharethis help us with this but the way they worked is based on the exact URL that was shared. So for example if someone has 100 shares on facebook on a blog post for example if they change URL these buttons will be down to zero again.</p>

<p>The trick is to keep post the “old URL” even if the URL has changed.</p>

<p>I had recently this situation in wordpress and I decided to post the solution here for the plugin I was using (digg digg) as I tried to find an easy solution online but found none.</p>

<p>So I changed the URL’s from the default wordpress URL (?p=post_id) to a very simple (/post-name). The trick was hacking the file digg-digg.php in function dd_hook_wp_content . Chaging to the following lines :</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">global</span> <span class="nv">$wp_query</span><span class="p">;</span>
<span class="nv">$post</span> <span class="o">=</span> <span class="nv">$wp_query</span><span class="o">-&amp;</span><span class="n">gt</span><span class="p">;</span><span class="n">post</span><span class="p">;</span> <span class="c1">//get post content</span>
<span class="nv">$id</span> <span class="o">=</span> <span class="nv">$post</span><span class="o">-&amp;</span><span class="n">gt</span><span class="p">;</span><span class="no">ID</span><span class="p">;</span> <span class="c1">//get post id</span>
<span class="nv">$postlink</span> <span class="o">=</span> <span class="nf">get_permalink</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span> <span class="c1">//get post link</span>
<span class="nv">$commentcount</span> <span class="o">=</span> <span class="nv">$post</span><span class="o">-&amp;</span><span class="n">gt</span><span class="p">;</span><span class="n">comment_count</span><span class="p">;</span> <span class="c1">//get post comment count</span>
<span class="nv">$title</span> <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$post</span><span class="o">-&amp;</span><span class="n">gt</span><span class="p">;</span><span class="n">post_title</span><span class="p">);</span> <span class="c1">// get post title</span>
<span class="o">&lt;</span><span class="n">strong</span><span class="o">&gt;//</span><span class="no">HACK</span> <span class="no">BY</span> <span class="no">JOAO</span><span class="o">&lt;/</span><span class="n">strong</span><span class="o">&gt;</span>
<span class="nv">$sharing_url</span> <span class="o">=</span> <span class="nf">get_permalink</span><span class="p">();</span>
<span class="o">&lt;</span><span class="n">strong</span><span class="o">&gt;//</span><span class="nc">First</span> <span class="n">post</span> <span class="n">id</span> <span class="n">after</span> <span class="n">changing</span> <span class="n">to</span> <span class="n">permalinks</span><span class="o">&lt;/</span><span class="n">strong</span><span class="o">&gt;</span>
<span class="nv">$url_change_id</span> <span class="o">=</span> <span class="s2">"1020"</span><span class="p">;</span>
<span class="nv">$post_id</span> <span class="o">=</span> <span class="nv">$id</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$post_id</span> <span class="o">&amp;</span><span class="n">lt</span><span class="p">;</span> <span class="nv">$url_change_id</span><span class="p">)</span> <span class="p">{</span>
  <span class="nv">$url_id_postfix</span> <span class="o">=</span> <span class="s2">"/?p="</span> <span class="mf">.</span> <span class="nv">$post_id</span><span class="p">;</span>
  <span class="nv">$sharing_url</span> <span class="o">=</span> <span class="s2">"http://example.com"</span><span class="mf">.</span><span class="nv">$url_id_postfix</span><span class="p">;</span>
<span class="p">}</span>
<span class="nv">$link</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="no">DD_DASH</span><span class="p">,</span><span class="nv">$postlink</span><span class="p">);</span> <span class="c1">//split the link with '#'</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nv">$link</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nv">$sharing_url</span><span class="p">;</span></code></pre></figure>

<p>So this hopefully fixes it for you guys, any question feel free to ask!.</p>

          </div>
          <div class="article-share">
            
            
            <a href="https://twitter.com/home?status=Changing+to+permalinks+in+wordpress+keeping+social+proof%20-%20/posts/changing-to-permalinks-in-wordpress-keeping-social-proof%20by%20@joaogarin" title="Share on Twitter" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 512 512"><path d="M492 109.5c-17.4 7.7-36 12.9-55.6 15.3 20-12 35.4-31 42.6-53.6 -18.7 11.1-39.4 19.2-61.5 23.5C399.8 75.8 374.6 64 346.8 64c-53.5 0-96.8 43.4-96.8 96.9 0 7.6 0.8 15 2.5 22.1 -80.5-4-151.9-42.6-199.6-101.3 -8.3 14.3-13.1 31-13.1 48.7 0 33.6 17.2 63.3 43.2 80.7C67 210.7 52 206.3 39 199c0 0.4 0 0.8 0 1.2 0 47 33.4 86.1 77.7 95 -8.1 2.2-16.7 3.4-25.5 3.4 -6.2 0-12.3-0.6-18.2-1.8 12.3 38.5 48.1 66.5 90.5 67.3 -33.1 26-74.9 41.5-120.3 41.5 -7.8 0-15.5-0.5-23.1-1.4C62.8 432 113.7 448 168.3 448 346.6 448 444 300.3 444 172.2c0-4.2-0.1-8.4-0.3-12.5C462.6 146 479 129 492 109.5z"/></svg>
            </a>
            <a href="https://www.facebook.com/sharer/sharer.php?u=/posts/changing-to-permalinks-in-wordpress-keeping-social-proof" title="Share on Facebook" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 512 512"><path d="M288 192v-38.1c0-17.2 3.8-25.9 30.5-25.9H352V64h-55.9c-68.5 0-91.1 31.4-91.1 85.3V192h-45v64h45v192h83V256h56.4l7.6-64H288z"/></svg>
            </a>
            <a href="https://plus.google.com/share?url=/posts/changing-to-permalinks-in-wordpress-keeping-social-proof" title="Share on Google+" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 128 128"><path d="M40.7 55.9v16.1c0 0 15.6 0 22 0C59.2 82.5 53.8 88.2 40.7 88.2c-13.3 0-23.7-10.8-23.7-24.2s10.4-24.2 23.7-24.2c7.1 0 11.6 2.5 15.8 5.9 3.3-3.3 3.1-3.8 11.6-11.9 -7.2-6.6-16.8-10.6-27.4-10.6C18.2 23.3 0 41.5 0 64c0 22.5 18.2 40.7 40.7 40.7 33.6 0 41.8-29.3 39-48.8H40.7zM113.9 56.7V42.6h-10.1v14.1H89.4v10.1h14.5v14.5h10.1V66.8H128V56.7H113.9z"/></svg>
            </a>
          </div>

          
            <div id="disqus_thread" class="article-comments"></div>
            <script src="https://joaogarinblog.disqus.com/embed.js" async defer></script>
            <noscript>Please enable JavaScript to view the comments.</noscript>
          
        </article>
        <footer class="footer scrollappear">
  <p>
    This site is powered by Jekyll and Chalk theme. All content rights reserved to 
    <a href="/about" title="About me">Joao Garin</a>.
  </p>
</footer>

      </div>
    </div>
  </main>
  

<script src="/assets/vendor-130c9c254effc51f3283620bc635851da7b99c20901216948f11ba72ee13317f.js" type="text/javascript"></script>


  <script src="/assets/webfonts-96493456d319d1bf419afdf8701552d4d486fee6afd304897d4fd81eb4e0cc0b.js" type="text/javascript"></script>



  <script src="/assets/scrollappear-e2da8ea567e418637e31266cc5302126eaa79f62a2273739086358b589a89ee6.js" type="text/javascript"></script>


<script src="/assets/application-cfde13ac81ddaf4351b2e739603e2baf688d0fcc9aba613fe62bbb1c7b037fb9.js" type="text/javascript"></script>

</body>
</html>
