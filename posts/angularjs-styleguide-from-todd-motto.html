<!doctype html>
<html lang="en">


<head>
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>joaogarin | Angularjs styleguide from Todd Motto</title>
  <meta name="description" content="A style guide that covers mainly the topics of Architecture, file structure, components, one-way data flow and best practices">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="Angularjs styleguide from Todd Motto">
  <meta property="og:type" content="website">
  <meta property="og:url" content="/posts/angularjs-styleguide-from-todd-motto">
  <meta property="og:description" content="A style guide that covers mainly the topics of Architecture, file structure, components, one-way data flow and best practices">
  <meta property="og:site_name" content="joaogarin">
  <meta property="og:image" content="/posts/style.jpg">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:url" content="/posts/angularjs-styleguide-from-todd-motto">
  <meta name="twitter:title" content="Angularjs styleguide from Todd Motto">
  <meta name="twitter:description" content="A style guide that covers mainly the topics of Architecture, file structure, components, one-way data flow and best practices">
  <meta name="twitter:image" content="/posts/style.jpg">

  <link href="/feed.xml" type="application/rss+xml" rel="alternate" title="joaogarin Last 10 blog posts" />

  

  
    <link rel="icon" type="image/x-icon" href="/assets/favicon-light-a98c41efc5ed9fcc06ac664c9e2f7a9b3c3b2e0a52357d221fe382f6f4abc8fc.ico">
    <link rel="apple-touch-icon" href="/assets/apple-touch-icon-light-87d1f2a3a19b1500e5c1626a0492025ca5f7f97d24540dc5900288e92112925a.png">
    <link rel="stylesheet" type="text/css" href="/assets/light-bb1553a18d0f1ccfe1aabc010584c49b4277a88503216b78906ba719e30019c1.css">
  
</head>

<body>
  <main>
    <div class="grid grid-centered">
      <div class="grid-cell">
        <nav class="header-nav scrollappear">
  <a href="/" class="header-logo" title="joaogarin">joaogarin</a>
  <ul class="header-links">
    
      <li>
        <a href="/about" title="About me">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-about">
  <use href="/assets/about-ecf154b571ab8034ae00aeed91a3b7ad68db80b46d958753ad6216c919486e88.svg#icon-about" xlink:href="/assets/about-ecf154b571ab8034ae00aeed91a3b7ad68db80b46d958753ad6216c919486e88.svg#icon-about"></use>
</svg>

        </a>
      </li>
    
    
      <li>
        <a href="https://twitter.com/joaogarin" rel="noreferrer noopener" target="_blank" title="Twitter">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-twitter">
  <use href="/assets/twitter-8842c33965263ad1b03a978406826677a668f94125d5837e70ab83f24b3213a7.svg#icon-twitter" xlink:href="/assets/twitter-8842c33965263ad1b03a978406826677a668f94125d5837e70ab83f24b3213a7.svg#icon-twitter"></use>
</svg>

        </a>
      </li>
    
    
      <li>
        <a href="https://www.facebook.com/joao.garin" rel="noreferrer noopener" target="_blank" title="Facebook">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-facebook">
  <use href="/assets/facebook-72c99b26d37bee65607720abb23d26b44ef30cca1187f98b0d9305be1230b1bf.svg#icon-facebook" xlink:href="/assets/facebook-72c99b26d37bee65607720abb23d26b44ef30cca1187f98b0d9305be1230b1bf.svg#icon-facebook"></use>
</svg>

        </a>
      </li>
    
    
    
      <li>
        <a href="https://github.com/joaogarin" rel="noreferrer noopener" target="_blank" title="GitHub">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-github">
  <use href="/assets/github-094f81040819f34343ee6ffff0980f17e2807b08b595eaaf66ae3554934fd78d.svg#icon-github" xlink:href="/assets/github-094f81040819f34343ee6ffff0980f17e2807b08b595eaaf66ae3554934fd78d.svg#icon-github"></use>
</svg>

        </a>
      </li>
    
    
    
    
    
    
    
      <li>
        <a href="https://www.linkedin.com/in/joao-garin-9b118525" rel="noreferrer noopener" target="_blank" title="LinkedIn">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-linkedin">
  <use href="/assets/linkedin-cdc5c107044324a3dfbea2e9ead15873f8dee304c37d73a046988956b706256e.svg#icon-linkedin" xlink:href="/assets/linkedin-cdc5c107044324a3dfbea2e9ead15873f8dee304c37d73a046988956b706256e.svg#icon-linkedin"></use>
</svg>

        </a>
      </li>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
      <li>
        <a href="/feed.xml" rel="noreferrer noopener" target="_blank" title="RSS">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-rss">
  <use href="/assets/rss-541ec5cea9cefd10d2fcfec01888f3f231a8829940249835fa7b7b3a12ae0d0d.svg#icon-rss" xlink:href="/assets/rss-541ec5cea9cefd10d2fcfec01888f3f231a8829940249835fa7b7b3a12ae0d0d.svg#icon-rss"></use>
</svg>

        </a>
      </li>
    
  </ul>
</nav>

        <article class="article scrollappear">
          <header class="article-header">
            <h1>Angularjs styleguide from Todd Motto</h1>
            <p>A style guide that covers mainly the topics of Architecture, file structure, components, one-way data flow and best practices</p>
            <div class="article-list-footer">
              <span class="article-list-date">
                July 9, 2016
              </span>
              <span class="article-list-divider">-</span>
              <span class="article-list-minutes">
                
                
                  13 minute read
                
              </span>
              <span class="article-list-divider">-</span>
              <div class="article-list-tags">
                
                  <a href="/tag/web">web</a>
                
                  <a href="/tag/angular">angular</a>
                
                  <a href="/tag/javascript">javascript</a>
                
              </div>
            </div>
          </header>

          <div class="article-content">
            <p><a href="/assets/posts/style-72fcd54563d158d9b61aca866ec2a5c5597e90923ae467ad3cfadee17be557d3.jpg" data-rjs="/assets/posts/style-72fcd54563d158d9b61aca866ec2a5c5597e90923ae467ad3cfadee17be557d3.jpg" class="fluidbox-trigger">
  <img src="/assets/posts/style-72fcd54563d158d9b61aca866ec2a5c5597e90923ae467ad3cfadee17be557d3.jpg" alt="Sky" />
</a></p>

<h2 id="angular-1-is-not-dead">Angular 1 is not dead!</h2>

<p>As Angular 2 get’s a lot of momentum, Angular 1 seems to be a little off in the choices of developers for building new apps, but a big amount of apps are still being run in Angular 1. And fortunately the Angular team has made a big effort in getting Angular 1 up to speed with the latest of the web, as component architecture approach and one way direction data flow.</p>

<p><a href="https://joaogarin.com/blog/angular-1-component-method">In another blog post</a> we talked about the Angular 1.5 component method and how it can be used to build a component architectured app in Angular 1, and another big addition to this to make your app really solid and maintainable is the new <a href="https://github.com/toddmotto/angular-styleguide">Angular styleguide</a> by <a href="https://twitter.com/toddmotto">Todd Motto</a>. This style guide gives you a really good insight on how to combine the latest improvements in Angular 1 with ES6 (using babel or typescript) to make a solid well founded and maintainable Angular 1 app.</p>

<p>The style guide covers mainly the topics of Architecture, file structure, components, one-way data flow and best practices. So let’s start taking a look on what it is and how it can help you in getting your Angular 1 app to the next level.</p>

<h3 id="migrate-to-angular-2-not-relevant">Migrate to Angular 2? Not relevant</h3>

<p>While this approach makes it easier for you go converge into Angular 2, I am not going to get too much into that. I think a lot of the apps will not really be converted into Angular 2 and I don’t think you should consider this approach only if you are thinking about going to Angular 2. The reason for considering this approach is because you want a solid and maintainable Angular 1 app, and that just by itself should be enough.</p>

<h2 id="a-modular-architecture">A Modular architecture</h2>

<p>In Angular 1 think of every module of your application as a module component. A module component is the definition of the module that encapsulates all the logic, templates, routing and also all the child components of that component. This will be reflected in the folder structure of the app.</p>

<p>We should have 3 main folders that represent 3 high level modules, Root ,Component and Common.</p>

<ul>
  <li>Root  - The Root of our app that bootstraps and kicks our app off, all the components are imported into this Root component.</li>
  <li>Component - Reusable components, they should be generic components that can easily be imported into a different app, they have no app specific logic in them.</li>
  <li>Common - App specific components. They are components that contain some app specific logic in them.</li>
</ul>

<h2 id="root-module">Root module</h2>

<p>The Root module starts with a Root component that defines the base element for the whole app. It can also and most probably will, define a router outlet.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// app.component.js</span>
<span class="kd">const</span> <span class="nx">AppComponent</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">template</span><span class="p">:</span> <span class="s2">`
    &lt;header&gt;
        Hello world
    &lt;/header&gt;
    &lt;div&gt;
        &lt;div ui-view&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;footer&gt;
        Copyright MyApp 2016.
    &lt;/footer&gt;
  `</span>
<span class="p">};</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">AppComponent</span><span class="p">;</span></code></pre></figure>

<p>Notice how the component definition object is exported using ES6 export as default to be then imported into our module js file.</p>

<p>Now we register our app with all the “Common” and “Component” type components (which include their own modules) and registered using .component(app, AppComponent) with our imported Component definition from the file app.component.js we showed right before this.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// app.js</span>
<span class="k">import</span> <span class="nx">angular</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">angular</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">uiRouter</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">angular-ui-router</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">AppComponent</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./app.component</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Components</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./components/components</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Common</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./common/common</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">root</span> <span class="o">=</span> <span class="nx">angular</span>
  <span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="dl">'</span><span class="s1">app</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span>
    <span class="nx">Components</span><span class="p">,</span>
    <span class="nx">Common</span><span class="p">,</span>
    <span class="nx">uiRouter</span>
  <span class="p">])</span>
  <span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="dl">'</span><span class="s1">app</span><span class="dl">'</span><span class="p">,</span> <span class="nx">AppComponent</span><span class="p">);</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">root</span><span class="p">;</span></code></pre></figure>

<h2 id="component-module">Component module</h2>

<p>Component module is the responsible for loading all the reusable components of the app. So this way in the Component module we import all the low level reusable components and as shown previously this module is imported directly in the root module.</p>

<p>It looks like something like the following :</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">angular</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">angular</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Calendar</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./calendar</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Events</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./events</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">components</span> <span class="o">=</span> <span class="nx">angular</span>
  <span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="dl">'</span><span class="s1">app.components</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span>
    <span class="nx">Calendar</span><span class="p">,</span>
    <span class="nx">Events</span>
  <span class="p">])</span>
  <span class="p">.</span><span class="nx">name</span><span class="p">;</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">components</span><span class="p">;</span></code></pre></figure>

<p>So what is going on in there is we are importing first angular, then all our single lower level component modules like calendar, events and we register our module with all these lower level components as dependencies. We then export so that it can be imported in the root module.</p>

<h2 id="common-module">Common module</h2>

<p>The common module is somewhat similar to the component module, the difference being here we are importing app specific component modules instead of reusable generic components. One of the reasons for this is we can easily pick components from the component module and place them in a different app, and know they should work without a problem because they are not specific to any app.</p>

<p>The common module looks like this :</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">angular</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">angular</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Nav</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./nav</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Footer</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./footer</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">common</span> <span class="o">=</span> <span class="nx">angular</span>
  <span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="dl">'</span><span class="s1">app.common</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span>
    <span class="nx">Nav</span><span class="p">,</span>
    <span class="nx">Footer</span>
  <span class="p">])</span>
  <span class="p">.</span><span class="nx">name</span><span class="p">;</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">common</span><span class="p">;</span></code></pre></figure>

<p>Once again what we are doing here is first of all loading angular, then we load each of our single app specific module components and register them in a module that we call app.common. And export so that this can be imported up in the root module.</p>

<h2 id="lower-level-modules">Lower level modules</h2>

<p>We saw earlier that each of these modules loads lower level component modules either in the Common module or the Component module. These lower level components contain their dependencies, routing definitions. An important note is to remember to add the <strong>name</strong> suffix when exporting a new module.</p>

<p>A simple component file could look like this for a Calendar Component. We import the component definition object from calendar.component.js like shown previously and register the module, component and set the routing definition in this file (index.js).</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">angular</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">angular</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">uiRouter</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">angular-ui-router</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">CalendarComponent</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./calendar.component</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">calendar</span> <span class="o">=</span> <span class="nx">angular</span>
  <span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="dl">'</span><span class="s1">calendar</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span>
    <span class="nx">uiRouter</span>
  <span class="p">])</span>
  <span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="dl">'</span><span class="s1">calendar</span><span class="dl">'</span><span class="p">,</span> <span class="nx">CalendarComponent</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">config</span><span class="p">((</span><span class="nx">$stateProvider</span><span class="p">,</span> <span class="nx">$urlRouterProvider</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">$stateProvider</span>
      <span class="p">.</span><span class="nx">state</span><span class="p">(</span><span class="dl">'</span><span class="s1">calendar</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/calendar</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">component</span><span class="p">:</span> <span class="dl">'</span><span class="s1">calendar</span><span class="dl">'</span>
      <span class="p">});</span>
    <span class="nx">$urlRouterProvider</span><span class="p">.</span><span class="nx">otherwise</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">name</span><span class="p">;</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">calendar</span><span class="p">;</span></code></pre></figure>

<h2 id="naming-conventions-for-files">Naming conventions for files</h2>

<p>But sometimes a lower level module contains directives, services and not only a component and we should follow a nice file naming pattern for these files.</p>

<p>Everything should be pretty simple and explicit, using the component name followed by name of the type of file. We then use the index.js to import these and put them all together in the module definition.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">index</span><span class="p">.</span><span class="nx">js</span>
<span class="nx">calendar</span><span class="p">.</span><span class="nx">controller</span><span class="p">.</span><span class="nx">js</span>
<span class="nx">calendar</span><span class="p">.</span><span class="nx">component</span><span class="p">.</span><span class="nx">js</span>
<span class="nx">calendar</span><span class="p">.</span><span class="nx">service</span><span class="p">.</span><span class="nx">js</span>
<span class="nx">calendar</span><span class="p">.</span><span class="nx">directive</span><span class="p">.</span><span class="nx">js</span>
<span class="nx">calendar</span><span class="p">.</span><span class="nx">filter</span><span class="p">.</span><span class="nx">js</span>
<span class="nx">calendar</span><span class="p">.</span><span class="nx">spec</span><span class="p">.</span><span class="nx">js</span></code></pre></figure>

<h2 id="controllers">Controllers</h2>

<p>Controllers should <em>ONLY</em> be used alongside components and not anywhere else. You should also use ES6 classes for controllers. <a href="https://github.com/toddmotto/angular-styleguide#controllers">The styleguide controller topic</a> provides some good suggestion for using classes in the controllers including using the constructor for dependency injection, exporting only the name property and not the class itself, using arrow functions, taking advantage of the lifecycle hooks and more.</p>

<p>A controller class that injects a service will look something like this :</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="cm">/* ----- todo/todo.controller.js ----- */</span>
<span class="kd">class</span> <span class="nx">TodoController</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">TodoService</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">todoService</span> <span class="o">=</span> <span class="nx">TodoService</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">$onInit</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">newTodo</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">title</span><span class="p">:</span> <span class="dl">''</span><span class="p">,</span>
      <span class="na">selected</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">todos</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">todoService</span><span class="p">.</span><span class="nx">getTodos</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">todos</span> <span class="o">=</span> <span class="nx">response</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">addTodo</span><span class="p">({</span> <span class="nx">todo</span> <span class="p">})</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">todo</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">todos</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">todo</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">newTodo</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">title</span><span class="p">:</span> <span class="dl">''</span><span class="p">,</span>
      <span class="na">selected</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">};</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nx">TodoController</span><span class="p">.</span><span class="nx">$inject</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">TodoService</span><span class="dl">'</span><span class="p">];</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">TodoController</span><span class="p">;</span></code></pre></figure>

<h2 id="one-way-data-flow-and-events">One way data flow and Events</h2>

<p>Angular 1.5 introduced one way data flow to allow for better communication between components. Again I would <a href="https://github.com/toddmotto/angular-styleguide#one-way-dataflow-and-events">refer to the styleguide</a> for some good suggestions on this, but some of the key things here are :</p>

<ul>
  <li>always use one-way databinding syntax ‘&lt;’</li>
  <li>Components that have bindings should use $onChanges to clone the one-way binding data *  to break Objects passing by reference and updating the parent data</li>
  <li>Use $event as a function argument in the parent method</li>
  <li>Pass an $event: {} Object back up from a stateless component</li>
</ul>

<h2 id="stateful-vs-stateless-components">Stateful vs Stateless components</h2>

<p>We should distinguish stateless from stateful components as it is an important definition in any component based architecture.</p>

<h3 id="stateful-components">Stateful components</h3>

<p>Stateful components are components that fetch or get state in some form, normally through a service that is injected to them. This normally happens in the controller, a service is injected into the controller and some kind of communication happens. This makes this component normally what we called a “Common” module component as it is dependent of the app itself.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="cm">/* ----- todo/todo.controller.js ----- */</span>
<span class="kd">class</span> <span class="nx">TodoController</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">TodoService</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">todoService</span> <span class="o">=</span> <span class="nx">TodoService</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">$onInit</span><span class="p">()</span> <span class="p">{</span>
    <span class="err">…</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">todoService</span><span class="p">.</span><span class="nx">getTodos</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">todos</span> <span class="o">=</span> <span class="nx">response</span><span class="p">);</span>
    <span class="err">…</span><span class="p">.</span>
  <span class="p">}</span>
  <span class="nx">addTodo</span><span class="p">({</span> <span class="nx">todo</span> <span class="p">})</span> <span class="p">{</span>
    <span class="p">...</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">TodoController</span><span class="p">.</span><span class="nx">$inject</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">TodoService</span><span class="dl">'</span><span class="p">];</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">TodoController</span><span class="p">;</span></code></pre></figure>

<p>One important idea is that stateful components since they have to have this knowledge of data and data dependency, they should do exactly that and delegate the rendering to stateless components, so you should not use directives such as ng-repeat or things like that in this kind of components. Instead they get the data, and pass it down to child components that we will go through next.</p>

<h1 id="stateless-components">Stateless components</h1>

<p>Stateless components on the other hand are what are also called “Dumb” components. They don’t know or care where data comes from or goes to. Data is passed to them, and they pass data out, ignorant of what that data does, where it comes from or where it goes to. This makes these components highly reusable and easy to test.</p>

<p>They use bindings to define inputs and outputs. Inputs is data that comes in through the form of attribute bindings and outputs is data that goes out through events.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="cm">/* ----- todo/todo-form/todo-form.component.js ----- */</span>
<span class="k">import</span> <span class="nx">controller</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./todo-form.controller</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">TodoFormComponent</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">bindings</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">todo</span><span class="p">:</span> <span class="dl">'</span><span class="s1">&lt;</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">onAddTodo</span><span class="p">:</span> <span class="dl">'</span><span class="s1">&amp;</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="nx">controller</span><span class="p">,</span>
  <span class="na">template</span><span class="p">:</span> <span class="s2">`
    &lt;form name="todoForm" ng-submit="$ctrl.onSubmit();"&gt;
      &lt;input type="text" ng-model="$ctrl.todo.title"&gt;
      &lt;button type="submit"&gt;Submit&lt;/button&gt;
    &lt;/form&gt;
  `</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">TodoFormComponent</span><span class="p">;</span>

<span class="cm">/* ----- todo/todo-form/todo-form.controller.js ----- */</span>
<span class="kd">class</span> <span class="nx">TodoFormController</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">EventEmitter</span><span class="p">)</span> <span class="p">{}</span>
  <span class="nx">$onChanges</span><span class="p">(</span><span class="nx">changes</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">changes</span><span class="p">.</span><span class="nx">todo</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">todo</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span> <span class="k">this</span><span class="p">.</span><span class="nx">todo</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nx">onSubmit</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">todo</span><span class="p">.</span><span class="nx">title</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="c1">// with EventEmitter wrapper</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">onAddTodo</span><span class="p">(</span>
      <span class="nx">EventEmitter</span><span class="p">({</span>
        <span class="na">todo</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">todo</span>
      <span class="p">});</span>
    <span class="p">);</span>
    <span class="c1">// without EventEmitter wrapper</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">onAddTodo</span><span class="p">({</span>
      <span class="na">$event</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">todo</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">todo</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">TodoFormController</span><span class="p">.</span><span class="nx">$inject</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">EventEmitter</span><span class="dl">'</span><span class="p">];</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">TodoFormController</span><span class="p">;</span>

<span class="cm">/* ----- todo/todo-form/index.js ----- */</span>
<span class="k">import</span> <span class="nx">angular</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">angular</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">TodoFormComponent</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./todo-form.component</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">todoForm</span> <span class="o">=</span> <span class="nx">angular</span>
  <span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="dl">'</span><span class="s1">todo.form</span><span class="dl">'</span><span class="p">,</span> <span class="p">[])</span>
  <span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="dl">'</span><span class="s1">todoForm</span><span class="dl">'</span><span class="p">,</span> <span class="nx">TodoFormComponent</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="dl">'</span><span class="s1">EventEmitter</span><span class="dl">'</span><span class="p">,</span> <span class="nx">payload</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="na">$event</span><span class="p">:</span> <span class="nx">payload</span><span class="p">});</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">todoForm</span><span class="p">;</span></code></pre></figure>

<p>Some things to notice here. First of all the component fetches no state, it does not use service of any kind.</p>

<p>Data is passed to him through bindings, it then uses the $onChanges lifecycle hook to create a new instance for the todo binding to avoid reflection on the parent and instead only pass the data through the event <em>onAddTodo</em> avoiding any kind of automatic update (two way binding) in the parent.</p>

<p>It should be very explicit how the data is sent and the parent should be responsible for doing with that event what he intends to do with it.</p>

<h2 id="directives">Directives</h2>

<p>Just a quick word on directives. Components do not replace all types of directives. But they do replace a considerable amount of them in any Angular 1 app. We should think carefully on when to use a directive and also what to include in it now that Directives and Components provide similar things.</p>

<p>But essentially the idea is that directives should not declare templates and controllers anymore and they should also not receive data through bindings. They should be used only for manipulating the DOM by extending normal HTML created from components. So you should use it when you need custom DOM Events or API’s, and you should binding it to something inside a template of a component(). You should also always restrict it to “A” (Attribute) (like ng-repeat, ng-class etc do).</p>

<h2 id="services">Services</h2>

<p>Services are basically where you wrap app logic that components should not have directly in them. It’s a way to abstract logic of rendering and presentation. You should use ES6 classes and always use .service() and not .factory() anymore, and use the $inject property together with it to inject dependencies like $http that are available through them.</p>

<p>Here is an example of a service class :</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="cm">/* ----- todo/todo.service.js ----- */</span>
<span class="kd">class</span> <span class="nx">TodoService</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">$http</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$http</span> <span class="o">=</span> <span class="nx">$http</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">getTodos</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">$http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/api/todos</span><span class="dl">'</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">TodoService</span><span class="p">.</span><span class="nx">$inject</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">$http</span><span class="dl">'</span><span class="p">];</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">TodoService</span><span class="p">;</span>

<span class="cm">/* ----- todo/index.js ----- */</span>
<span class="k">import</span> <span class="nx">angular</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">angular</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">TodoComponent</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./todo.component</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">TodoService</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./todo.service</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">todo</span> <span class="o">=</span> <span class="nx">angular</span>
  <span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="dl">'</span><span class="s1">todo</span><span class="dl">'</span><span class="p">,</span> <span class="p">[])</span>
  <span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="dl">'</span><span class="s1">todo</span><span class="dl">'</span><span class="p">,</span> <span class="nx">TodoComponent</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">service</span><span class="p">(</span><span class="dl">'</span><span class="s1">TodoService</span><span class="dl">'</span><span class="p">,</span> <span class="nx">TodoService</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">name</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">todo</span><span class="p">;</span></code></pre></figure>

<p>We essentially define our class with a constructor getting the external dependencies passed in and we define our methods that will be called from our controllers such as the getTodos() method here that simply does an http request to some API. We then import the service in the index.js file and register it there together with all the other parts of our module like component(), filters or any other things that compose our module.</p>

<h2 id="wrapping-things-up">Wrapping things up</h2>

<p>This is a very good approach to building solid apps with Angular 1. If you have an Angular 1 app, and you are expecting to maintain it for a large amount of time you should definitely consider this approach. It uses some of the most modern things in the Javascript specs like Classes, constants, and module imports and exports and some best practices like component based architecture and one way data flow and a lot of other good ideas like keeping a nice folder structure that really represents your app.</p>

<p>If you are or migrating to Angular 2 then I would say this is also a very good way to start thinking in Angular 2 way,  Classes, Components, Inputs, Output events are all concepts you will be seeing regularly in Angular 2 so it’s a good way to get familiar with them in a app you already know, your own.</p>

          </div>
          <div class="article-share">
            
            
            <a href="https://twitter.com/home?status=Angularjs+styleguide+from+Todd+Motto%20-%20/posts/angularjs-styleguide-from-todd-motto%20by%20@joaogarin" title="Share on Twitter" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 512 512"><path d="M492 109.5c-17.4 7.7-36 12.9-55.6 15.3 20-12 35.4-31 42.6-53.6 -18.7 11.1-39.4 19.2-61.5 23.5C399.8 75.8 374.6 64 346.8 64c-53.5 0-96.8 43.4-96.8 96.9 0 7.6 0.8 15 2.5 22.1 -80.5-4-151.9-42.6-199.6-101.3 -8.3 14.3-13.1 31-13.1 48.7 0 33.6 17.2 63.3 43.2 80.7C67 210.7 52 206.3 39 199c0 0.4 0 0.8 0 1.2 0 47 33.4 86.1 77.7 95 -8.1 2.2-16.7 3.4-25.5 3.4 -6.2 0-12.3-0.6-18.2-1.8 12.3 38.5 48.1 66.5 90.5 67.3 -33.1 26-74.9 41.5-120.3 41.5 -7.8 0-15.5-0.5-23.1-1.4C62.8 432 113.7 448 168.3 448 346.6 448 444 300.3 444 172.2c0-4.2-0.1-8.4-0.3-12.5C462.6 146 479 129 492 109.5z"/></svg>
            </a>
            <a href="https://www.facebook.com/sharer/sharer.php?u=/posts/angularjs-styleguide-from-todd-motto" title="Share on Facebook" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 512 512"><path d="M288 192v-38.1c0-17.2 3.8-25.9 30.5-25.9H352V64h-55.9c-68.5 0-91.1 31.4-91.1 85.3V192h-45v64h45v192h83V256h56.4l7.6-64H288z"/></svg>
            </a>
            <a href="https://plus.google.com/share?url=/posts/angularjs-styleguide-from-todd-motto" title="Share on Google+" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 128 128"><path d="M40.7 55.9v16.1c0 0 15.6 0 22 0C59.2 82.5 53.8 88.2 40.7 88.2c-13.3 0-23.7-10.8-23.7-24.2s10.4-24.2 23.7-24.2c7.1 0 11.6 2.5 15.8 5.9 3.3-3.3 3.1-3.8 11.6-11.9 -7.2-6.6-16.8-10.6-27.4-10.6C18.2 23.3 0 41.5 0 64c0 22.5 18.2 40.7 40.7 40.7 33.6 0 41.8-29.3 39-48.8H40.7zM113.9 56.7V42.6h-10.1v14.1H89.4v10.1h14.5v14.5h10.1V66.8H128V56.7H113.9z"/></svg>
            </a>
          </div>

          
            <div id="disqus_thread" class="article-comments"></div>
            <script src="https://joaogarinblog.disqus.com/embed.js" async defer></script>
            <noscript>Please enable JavaScript to view the comments.</noscript>
          
        </article>
        <footer class="footer scrollappear">
  <p>
    This site is powered by Jekyll and Chalk theme. All content rights reserved to 
    <a href="/about" title="About me">Joao Garin</a>.
  </p>
</footer>

      </div>
    </div>
  </main>
  

<script src="/assets/vendor-130c9c254effc51f3283620bc635851da7b99c20901216948f11ba72ee13317f.js" type="text/javascript"></script>


  <script src="/assets/webfonts-96493456d319d1bf419afdf8701552d4d486fee6afd304897d4fd81eb4e0cc0b.js" type="text/javascript"></script>



  <script src="/assets/scrollappear-e2da8ea567e418637e31266cc5302126eaa79f62a2273739086358b589a89ee6.js" type="text/javascript"></script>


<script src="/assets/application-cfde13ac81ddaf4351b2e739603e2baf688d0fcc9aba613fe62bbb1c7b037fb9.js" type="text/javascript"></script>

</body>
</html>
